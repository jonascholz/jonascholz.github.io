{% include base_path %}

<!-- start custom head snippets -->

<link rel="apple-touch-icon" sizes="57x57" href="{{ base_path }}/images/apple-touch-icon-57x57.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="60x60" href="{{ base_path }}/images/apple-touch-icon-60x60.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="72x72" href="{{ base_path }}/images/apple-touch-icon-72x72.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="76x76" href="{{ base_path }}/images/apple-touch-icon-76x76.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="114x114" href="{{ base_path }}/images/apple-touch-icon-114x114.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="120x120" href="{{ base_path }}/images/apple-touch-icon-120x120.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="144x144" href="{{ base_path }}/images/apple-touch-icon-144x144.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="152x152" href="{{ base_path }}/images/apple-touch-icon-152x152.png?v=M44lzPylqQ">
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png?v=M44lzPylqQ">
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png?v=M44lzPylqQ" sizes="32x32">
<link rel="icon" type="image/png" href="{{ base_path }}/images/android-chrome-192x192.png?v=M44lzPylqQ" sizes="192x192">
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-96x96.png?v=M44lzPylqQ" sizes="96x96">
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-16x16.png?v=M44lzPylqQ" sizes="16x16">
<link rel="manifest" href="{{ base_path }}/images/manifest.json?v=M44lzPylqQ">
<link rel="mask-icon" href="{{ base_path }}/images/safari-pinned-tab.svg?v=M44lzPylqQ" color="#000000">
<link rel="shortcut icon" href="/images/favicon.ico?v=M44lzPylqQ">
<meta name="msapplication-TileColor" content="#000000">
<meta name="msapplication-TileImage" content="{{ base_path }}/images/mstile-144x144.png?v=M44lzPylqQ">
<meta name="msapplication-config" content="{{ base_path }}/images/browserconfig.xml?v=M44lzPylqQ">
<meta name="theme-color" content="#ffffff">
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>


<!-- Support for MathJax with equation numbering -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\\[','\\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  },
  TeX: {
    equationNumbers: { autoNumber: "AMS" },
    extensions: ["AMSmath.js", "AMSsymbols.js", "color.js"],
    Macros: {
      // Basic colors (used in He initialization post)
      cx: ["{\\color{purple}{#1}}", 1],
      cw: ["{\\color{red}{#1}}", 1],
      cb: ["{\\color{blue}{#1}}", 1],
      cy: ["{\\color{orange}{#1}}", 1],
      cn: ["{\\color{green}{#1}}", 1],
      // Extended colors (used in BPTT post)
      cU: ["{\\color{ForestGreen}{#1}}", 1],
      cS: ["{\\color{orange}{#1}}", 1],
      cX: ["{\\color{purple}{#1}}", 1],
      cWin: ["{\\color{red}{#1}}", 1],
      cWrec: ["{\\color{teal}{#1}}", 1],
      calpha: ["{\\color{blue}{#1}}", 1],
      ctheta: ["{\\color{brown}{#1}}", 1],
      cE: ["{\\color{olive}{#1}}", 1],
      cyhat: ["{\\color{green}{#1}}", 1],
      cytarget: ["{\\color{magenta}{#1}}", 1]
    }
  },
  displayAlign: 'center',
  "HTML-CSS": {
    styles: {'.MathJax_Display': {"margin": "1em 0em"}}
  }
});
</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<!-- Custom CSS for MathJax equation numbering -->
<style>
/* Style equation numbers */
.MathJax .MathJax_ref {
  color: #0066cc;
  text-decoration: none;
}

.MathJax .MathJax_ref:hover {
  text-decoration: underline;
}

/* Equation number styling */
.MathJax_Display .MJXc-TeX-unknown-R {
  color: #666;
  font-size: 0.9em;
}

/* Ensure proper spacing for display equations */
.MathJax_Display {
  margin: 1em 0;
  text-align: center;
}

/* Figure styling */
figure {
  margin: 2em 0;
  text-align: center;
}

figcaption {
  margin-top: 0.5em;
  font-style: italic;
  color: #666;
  text-align: center;
  font-size: 0.9em;
  line-height: 1.4;
}

figcaption strong {
  font-weight: bold;
  color: #333;
}
</style>

<!-- Code copy button script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Find all code block containers
  const codeContainers = document.querySelectorAll('div.highlighter-rouge, figure.highlight');

  codeContainers.forEach(function(container) {
    // Make the ::before pseudo-element clickable by adding a real button
    container.style.cursor = 'pointer';

    // Add click handler to the container
    container.addEventListener('click', function(e) {
      // Only trigger if clicking near the top-right (where the icon is)
      const rect = container.getBoundingClientRect();
      const clickX = e.clientX - rect.left;
      const clickY = e.clientY - rect.top;

      // Check if click is in top-right area (approximate icon location)
      if (clickX > rect.width - 50 && clickY < 50) {
        // Find the code element
        const codeElement = container.querySelector('pre, code');
        if (!codeElement) return;

        const code = codeElement.textContent;

        // Copy to clipboard
        navigator.clipboard.writeText(code).then(function() {
          // Visual feedback - temporarily change the icon
          const originalContent = window.getComputedStyle(container, '::before').content;
          container.classList.add('copied');

          // Reset after 1 second
          setTimeout(function() {
            container.classList.remove('copied');
          }, 1000);
        }).catch(function(err) {
          console.error('Failed to copy code: ', err);
        });
      }
    });
  });
});
</script>

<!-- end custom head snippets -->
